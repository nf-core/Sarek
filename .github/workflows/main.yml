name: nf-core CI
# This workflow is triggered on pushes and PRs to the repository.
on: [push, pull_request]  

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Install Nextflow
      run: |
        wget -qO- get.nextflow.io | bash
        sudo mv nextflow /usr/local/bin/
    - name: Build References
      run: |
        ${GITHUB_WORKSPACE}/scripts/build_reference.sh --test SOMATIC --verbose
    - name: Run test
      run: |
        ${GITHUB_WORKSPACE}/scripts/run_test.sh --test SOMATIC --verbose