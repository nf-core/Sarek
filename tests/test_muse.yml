- name: Run variant calling on somatic sample with MuSE
  command: nextflow run main.nf -profile test,tools_somatic --tools muse --outdir results
  tags:
    - muse
    - somatic
    - variant_calling
  files:
    - path: results/cram/sample3.bam
      md5sum: 8cfa7f35990240ab663a0776ae67ecdc
    - cram: results/cram/sample4.bam
      md5sum: fe8ceee2ede1f9b0b4f2aaa3f1a97241
    - path: results/cram/sample3.bam.bai
      md5sum: c55142e20838c3b56d93ff853a7b7189
    - cram: results/cram/sample4.bam.bai
      md5sum: c6d0e6be2e5d8a6bd312517d9ba0f4af
    - path: results/csv/variantcalled.csv
      md5sum: 4545be9d6d7b77ba3b3f0aae5b7ca3af
    - path: results/multiqc
    - path: results/muse/sample4_vs_sample3.MuSE.txt
      md5sum: 432e9c18fb22c3bb4d857a397bab40fc
    - path: results/reports/bcftools/muse/sample4_vs_sample3/sample4_vs_sample3.muse.bcftools_stats.txt
      md5sum: 0a4c6d5841a55b492a50917b0610a0b3
    - path: results/reports/samtools/sample3/sample3.recal.cram.stats
      md5sum: bcc229318527e414e69aaa5cd092ad9b
    - path: results/reports/samtools/sample4/sample4.recal.cram.stats
      md5sum: 0d1784cb4c3f14b9858247ac6128dd03
    - path: results/variant_calling/muse/sample4_vs_sample3/sample4_vs_sample3.muse.vcf.gz
      contains: ['##INFO=<ID=SOMATIC,Number=0,Type=Flag,Description="Indicates if record is a somatic mutation">']
    # conda changes md5sums for test
    - path: results/reports/vcftools/muse/sample4_vs_sample3/sample4_vs_sample3.muse.FILTER.summary
      md5sum: 1ce42d34e4ae919afb519efc99146423
    - path: results/reports/vcftools/muse/sample4_vs_sample3/sample4_vs_sample3.muse.TsTv.qual
      md5sum: bc68ae4e688e9fb772b457069e604883
    # binary changes md5sums on reruns
    - path: results/reports/mosdepth/sample3/
    - path: results/reports/mosdepth/sample4/
